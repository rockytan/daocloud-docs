---
title: 持续集成和镜像构建的关系
taxonomy:
    category:
        - docs
process:
    twig: true
---

<!-- reviewed by fiona -->

<!--

可以先引用一些持续交付的理论性内容，比如http://exceedhl.thoughtworkers.org/cd/cd.html


什么是持续集成，持续集成的重要性
镜像构建，容器化软件交付，镜像是标准的交付件
自动构建节省时间，确保代码版本和镜像版本的高度一致

daocloud 平台，把这两个流程串联在一起，建议用户每次 commit 都跑 ci
每次打 tag 都执行build

强调 DaoCloud 的代码库绑定、CI持续集成测试、镜像构建 是一条高速流水线，实现了从代码到标准容器交付件的自动化、标准化流程。

-->

---

### 什么是持续交付？

[持续交付](http://en.wikipedia.org/wiki/Continuous_Delivery)是当前一个挺火的概念，它所描述的软件开发，是在从原始需求识别到最终产品部署到生产环境这个过程中，需求以小批量形式在团队的各个角色间顺畅流动，能够以较短地周期完成需求的小粒度频繁交付。频繁的交付周期带来了更迅速的对软件的反馈，并且在这个过程中，需求分析、产品的用户体验和交互设计、开发、测试、运维等角色密切协作，相比于传统的瀑布式软件团队，更少浪费。

简单来说，**持续交付是一种让产品代码快速更新迭代的方法**。

### 容器时代的持续交付

当软件开发来到容器时代时，持续交付变得更加有其用武之地。Docker 的发明使得软件的构建、发布、部署和迁移变得尤为简单。Docker 通过容器技术，将所有的运行环境、组件依赖、运行管理做到了粒度小、可维护性高、迁移方便。

通过 Docker 的对应用代码的构建成为 Docker 镜像，Docker 镜像便是容器时代标准的交付件，只需将镜像推送到相应的位置，便可以实现测试、发布和部署等生产流程。

一份 `Dockerfile` 将镜像的构建内容安排妥当，包括运行的环境、依赖库的安装、代码的处理等等；在 DaoCloud 中，利用 `daocloud.yml` 安排镜像的自动拉取和测试任务。

### 基于 DaoCloud 的持续交付

DaoCloud 为用户提供了 Docker 镜像的自动构建和自动发布功能，当用户完成了 `Dockerfile` 和 `daocloud.yml` 文件的编写后，将应用代码推送到第三方代码托管平台上，将其与 DaoCloud 绑定后，在每次修改（`commit`）后，并将其推送到代码托管平台上，DaoCloud 会检测到代码的变动，并根据 `Dockerfile` 和 `daocloud.yml` 进行相应的构建和测试；当触发规定的构建事件（如 `tag`）时，DaoCloud 会将其进行镜像构建，并推送到相对应的所有生产环节中。




